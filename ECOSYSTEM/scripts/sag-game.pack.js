for(_='flag@t(~:"class=>),",).map(([z,V])~"span{sag-chip"},[E(z" `${j(z)} \\xD7 ${V}`])en);le.ngth||ine,worldFromSAG:ee,activateSAGWorld:se,activateCode:ue,mergeSAG:de,addWorldSymbol:}to1k.quantumworm"},{wh:c.appdChild(.textContt=.addEvtLister(.replace(SAGGametoartificial.lifeforms"},{wh:c.href="https://operatorj.github.io/systems.as.games/ECOSYSTEM/	documtetAttribute("data-Object.~"div{returnfunction=.createEm~t ((){var ie=a/^sag[-\\s]?[0-6]{3}$/i.tes~ane=a{t=Strg(a"").normalize("NFKC").trim().toUpperCase()/[\\s\\u2010-\\u2015\\u2212\\uFE58\\uFE63\\uFF0D]+/g,"-"s=/^SAG-([0-6])([0-6])([0-6])$/.exec(t s?{code:`SAG-${s[1]}${s[2]}${s[3]}`,R:+s[1],G:+s[2],M:+s[3],seed:s[1]*49+s[2]*7+ +s[3]}:null},Ge=["barr"sprout"afy"bloom"grove"orchard"sanctuary"],we=["dark"dim"glt"bright"halo"gaze"overwatch"],Ae=["pla"hills"ridge"cliffs"crags"glacier"abyss"],Ce=["none"ht"cells"triangs"pyramids"facets"tessellation"],ke=(a,t,s)(a+2*t+3*s)%7; re(a){t=[];for(s of a){if(!s.startsWith("unlock:SAG-"))contue;o=s"unlock:""t.push([null,pe(o`${o}`,`active:${o}`])} t}var $e={"art.of.noise"\\u25B2\\u25BC\\u25B2"1k.quantumworm"\\u25B2\\u25B2\\u25BC"bean.sims"\\u25B2\\u25BC\\u25BCmcsv\\u25BC\\u25B2\\u25BC"artificial.lifeforms"\\u25BC\\u25BC\\u25B2"}; (){a=tries($e[t,s]=a?a[Math.random()*a|0]:["systems.as.games/ECOSYSTEM"\\u25B2\\u25B2\\u25B2"],o"a"o.id="home";d=new URLSearchParams(location.search).ge~"code"d?d=`?code=${codeURICompon~d)}`:d="o.href=`https://operatorj.github.io/${t}${d}`,os"\\u25B2\\u25B2\\u25B2.bodyou"a"u.id="gard-lnku	gard.htmlu"\\u{1F333}.bodyuv"a"v.id="river-lnkv	river.htmlv"\\u3030\\uFE0F.bodyvf"a"f.id="mounta-lnkf	mounta.htmlf"\\u26F0\\uFE0F.bodyf)}var pe=(a,t="emts"){s=ee(ao=codeURICompon~aif(!s)`/systems.as.games/gard.html?code=${o}`;d=cNumber(c0u={day:!!s?.knobs?.daylight,wd:!!s?.knobs?.wd,water:!!s?.knobs?.water,life:!!s?.knobs?.life,helios:d(s?.motifs?.helios?.velcrags:d(s?.motifs?.crags?.velgard:d(s?.motifs?.gard?.velfacet:Strg(s?.motifs?.facet"").toLowerCase(seed:Number(s?.seed??((a"")/\\D/g,"")0))},v={"SAG-000"art.of.noise"SAG-001"1k.quantumworm"SAG-003"bean.sims"SAG-006"mcsv"SAG-011"artificial.lifeforms"};if(v[a])`/${v[a]}/dex.html?code=${o}`;f={emts:[{wh:cu.day&&u.helios>=3,tomcsv"},{wh:cu.wdu.crags>=3,u.gard>=2u.wateru.life,!0,toart.of.noise"}],facet:[{wh:c/sound|music|noise/.tes~u.facettomcsv"},{wh:c/mounta|rock|crag|cave/.tes~u.facet/gard|river|organism|bio|life/.tes~u.facet!0,toart.of.noise"}],calmVsWild:[{wh:c(u.wd?1:0)+(u.crags>=2?1:0)+(u.day?0:1)>=2,u.gard>=2u.life,u.dayu.helios>=2,tomcsv"},{wh:c!0,toart.of.noise"}],hash:[{wh:cu.seed%4===0,tomcsv"},{wh:cu.seed%4===1,u.seed%4===2,!0,toart.of.noise"}],rarity:[{wh:cu.helios>=4&&u.crags>=4,u.gard>=4,u.helios>=4,tomcsv"},{wh:c!0,toart.of.noise"}]},m=f[t]f.emts;`/${(m.fd(cc.wh(s))m[m-1]).to}/dex.html?code=${o}`};var ee=a{t=ne(aif(!t) null;t{R:s,G:o,M:d,seed:u}=t,v=ke(s,o,d{code:t.code,seed:u,motifs:{gard:{vel:s,name:Ge[s]},helios:{vel:o,name:we[o]},crags:{vel:d,name:Ae[d]},facet:{vel:v,name:Ce[v]}},knobs:{spawnRate:.25+s*.08,revealChance:.08+o*.06,gateCost:1+d,wd:d>=3,facetDepth:v,daylight:!(o%2)}}},se=(a,{crumbsSector:t="#crumbs-rail"}={}){if(!a);t{code:s,motifs:o,knobs:d}=a,u=SAG?.get?.(){},v=new Se~u.@s[]for(h of[...v])h.startsWith("active:SAG-")&&v.dete(hv.add(`unlock:${s}`).add(`active:${s}`SAG?.set?.({@s:[...v]}?.toast?.(`${s} \\u2014 ${o.gard.name} \\xB7 ${o.helios.name} \\xB7 ${o.crags.name} \\xB7 ${o.facet.name}`,{titSAG Activatedicon\\u{1F50F}life:2e3}try{h=.Emt;h.dataset.sag=s,h.dataset.sagGard=o.gard.vel,h.dataset.sagHelios=o.helios.vel,h.dataset.sagCrags=o.crags.vel,h.dataset.sagFacet=o.facet.vel,h.dataset.sagWd=d.wd?"1"0h.dataset.sagDay=d.daylight?"1"0"}catch{}?.setWd?.(!!d.wd?.setTheme?.(d.daylight?"day"night"?.setFacetDepth?.(d.facetDepthf=SAG.ge~){},m=new Se~f.@s[]?.breadcrumbs?.([[`active:${s}`,pe(s`${s}`],...re(m)],t)},ue=(a,t){s=ee(a s&&(se(s,ts)},de=(a,t,s="overlay"){o=ne(ad=ne(tif(!o!d) null;u=s==="overlay"?Math.max:(v,f)(v^f)%7;`SAG-${u(o.R,d.R)}${u(o.G,d.G)}${u(o.M,d.M)}`};typeof wdow<"u"&&(wdow.SAGWorlds={isSAG:ie,parseSAG:nwdow.SAGWorlds={isSAG:i;var oe=a/^SAG-[0-6]{3}$/.tes~Strg(a)N=(a,t=)t.querySector(aK=(a,t=)Array.from(t.querySectorAll(a)((a){t=()a?.get?.(){},s=ea?.set?.(eo=()new Se~~).@s[]d=e(e[]).every(ro().has(r)u=freeze({A.-B-...C-.-.D-..E.F..-.G--.H....I..J.---K-.-L.-..M--N-.O---P.--.Q--.-R.-.S...T-U..-V...-W.--X-..-Y-.--Z--..0-----1.----2..---3...--4....-5.....6-....7--...8---..9----."}v=eu[Strg(e"").toUpperCase()]"f=eStrg(e"").spli~"").map(v).filter(Booan).jo(" " m(e,r){n=Strg(e"").trim()/\\s+/g," " keys(r).fd(pr[p]===n)} h(){e"div"e.id="terface";r"div"r.id="out";n"button"n.id="carn"Car";p"div"p.id="status";A"div"A.id="notification";G"div"G.id="crumbs-railG.Name="sag-crumbse.appd(r,n,p,A,G.bodye)}c=d; C(e,r){c(e)K(r).forEach(nn.remove())} $(e,r){K(r).forEach(nn.sty.display=c(e)?""none")} I(e,r){K(r).forEach(nn.sty.display=c(e)?"none"")} M(e){s({@s:[e]})} R(e,r,n){K(e).forEach(p{p?.href&&(c(r)?(p.href=a.href(p.getAttribute("href"n{}p.List.add("sag-abd")):p.List.remove("sag-abd"))})} g(e,r,n){typeof r=="object"&&!n&&(n=r,r="#crumbs-rail"n=n{};p=n.homeHref"./dex.htmlA=n.homeText"HomeG=o(y=N(rif(!y);E=[`<a ="sag-lk" href="${p}">${A}</a>`];for(t[j,P,H]of e[])(!jG.has(j))&&E.push(`<a ="sag-lk" data-@s="${j""}" href="${P}">${H}</a>`y.nerHTML=E.jo("\\u21D4"a.hance?.(y)} i(e,r,n,p,A){G=N(eif(!G);assign(G.sty,{touchActionnonewebkitUserSectnonewebkitTouchCalloutnone"}y=p?N(p):null;(~).@s[]).cludes(n)&&y&&(y.sty.display=""E=0;G"click(){E++;try{navigator.vibrate?.(10)}catch{}},{passive:!0}G"click(){E>=(r1)&&(s({@s:[n],...A{}}y&&(y.sty.display=""E=-1)},{passive:!0})} b(e=){K("[data-ratchet]e).forEach(r{n=r.gratchet"n&&M(n)}K("[data-requires]e).forEach(r{n=r.grequires")?.spli~").map(pp.trim()).filter(Booan)[];c(n)r.remove()}K("a[data-requires]e).forEach(r{n=r.grequires")?.spli~").map(yy.trim()).filter(Booan)[],p=r.g@s")?.spli~").map(yy.trim()).filter(Booan)[],A=r.gstep"G=assign({},p?{@s:p}:null,A?{step:A}:nullc(n)&&(r.href=a.href(r.getAttribute("href"G))}K("[data-colct-after][data-colct-@]e).forEach(r{n=parseIn~r.gcolct-after")"110p=r.gcolct-@"A=r.greveal"i("#"+r.id,n,p,A)})} w(e={}){r=e.el?N(e.el):N("canvas"if(!r);n=e.out?N(e.out):null,p=e.status?N(e.status):null,A=e.car?N(e.car):null,G="ontouchstart" wdownavigator.maxTouchPots>0navigator.msMaxTouchPots>0,y=e.unit220,E=e.torance??.45,j=e.tterGapMul??2.5,P=e.wordGapMul??6,H=e.autoWordMs??1200,B=e.symbolSpacg==="space"?" ":e.symbolSpacg==="th"?"\\u2009"";assign(r.sty,{touchActionnonewebkitTouchCalloutnonewebkitUserSectnone"}_=0,Y=0,J=0,q=[],x=[],l=[],F=y,T=null,U=0,D="Q="\\u25C9ae="\\u2583z=kk/\\./g,Q)/-/g,aeV=kk.map(Lz(L)).jo(Bve=k{p&&(pk)},X=(){if(!n);k=[];for(L of l)k.push(`<span ="word">${V([L])}</span>`x&&k.push(`<span ="tters">${x.map(LV([L])).jo(B+B)}</span>`q&&k.push(`<span ="buffer">${V([q.jo("")])}</span>`n.nerHTML=k.jo(B+B)},Z=()ve(q?z(q.jo(""))+D"fe=(){q&&(x.push(q.jo("")q=0,X(Z(e.onLetter?.(x[x-1],x.slice()))},be=(){if(fe(!x);k=x.jo(" "l.push(kx=0,X(Z(e.onWord?.(k,l.slice())},Se=(){carTimeou~JJ=setTimeou~be,H)};if(G"keydownk{if(k.metaKeyk.ctrlKeyk.altKey);L=k.key;if(!/^[a-z0-9]$/i.tes~L));k.prevtDefaul~O=v(LO&&(q&&fe(x.push(OX(Z(Se(e.onLetter?.(O,x.slice()))},{passive:!1}G){k=N("#terface").body,L"form"L.Name="sag-kb-wrapL.setAttribute("autocompte"off"O"put"O.type="textO.Name="sag-kb-putO.placeholder="Type a word\\u2026O.autocapitalize="offO.autocompte="offO.spellcheck=!1,O.putMode="text";te"button"te.type="submitte.Name="sag-btnte"VerifyL.appd(O,tekLL.sty.display="le-fxO.focus({prevtScroll:!0}L"submitye{ye.prevtDefaul~me=(O.value"").trim(if(!me);ge=me/\\s+/g,"").toUpperCase().spli~"").map(v).filter(Booanif(!ge);q=0,x=0,l=0,x.push(...gehe=x.jo(" "l.push(heX(Z(e.onWord?.(he,l.slice()O.value="O.focus({prevtScroll:!0})},{passive:!1})}ce=(){carTimeou~JJ=0,carTimeou~UU=0,_=0,Y=0,T?.partNode&&T.partNode.removeChild(TT=null,D="q=x=l=0,n&&(n.nerHTML=""p&&(p""X()}; A&&(A"clickce,{passive:!0}A"touchstartk{k.prevtDefaul~ce()},{passive:!1})Z({rese~){ce()},getWords:()l.slice(getLetters:()x.slice(setUnit:ky=k}}wdow.=assign(wdow.{},{fdItem:m,it:h,gate:C,showIf:$,hideIf:I,ratchet:M,condLk:R,breadcrumbs:g,colctAfterClicks:i,autowire:b,morse:w,MORSE:u,morseForChar:v,morseForWord:f})})(SAG((a){t=gStrg(g"").toLowerCase()/\\s+/g,"-"s=new Map,o=create(nulld=(g,i)(g=~gi=~ig<i?g+"|"+i:i+"|"+g u(g,i){b=.getEmtById("notification"b&&(b`You colcted ${g} x ${i}`,b.Name="activesetTimeou~(){b"b.Name=""},3e3))}v=()({...a.ge~)?.v{}}f=g{i={};for(b  g)g[b]>0&&(i[b]=g[b]|0 a.se~{v:i}i},m=(g,i=1){if(g=~gi|=0,i<=0) v(u(g,ib=v( b[g]=(b[g]|0)+i,f(b)},h=(g,i=1){if(g=~gi|=0,i<=0) v(b=v( b[g]=Math.max(0,(b[g]|0)-if(b)},c=(g,i=1)(v()[~g)]|0)>=(i|0 C(g){for(i of g[]){if(!i)contue;b=~i.aw=~i.be=~i.outs.se~d(b,w{a:b,b:w,out:e}o[e]=e/-/g," "o[b]=b/-/g," "o[w]=w/-/g," ")}}$=gassign(o,g{} I(g,i){b=s.ge~d(g,i) b?c(b.a,1)&&c(b.b,1)?{ok:!0,out:b.out}:{ok:!1,reasonsufficit"}:{ok:!1,reasonno-recipe"}} M(g,i){b=I(g,iif(!b.ok) b;w=s.ge~d(g,i)e=v( e[w.a]=(e[w.a]|0)-1,e[w.a]<=0&&dete e[w.a],e[w.b]=(e[w.b]|0)-1,e[w.b]<=0&&dete e[w.b],e[w.out]=(e[w.out]|0)+1,a.se~{v:e,@s:[`crafted:${w.out}`]}{ok:!0,out:w.out,label:o[w.out]w.out,v:e}} R(){g=[];for(t[,i]of s)g.push({a:i.a,b:i.b,out:i.out,aLabel:o[i.a]i.a,bLabel:o[i.b]i.b,outLabel:o[i.out]i.out} g}"clickg{i=g.target.closest?.("[data-craft]"if(!i);t[b,w]=(i.gcraft")"").spli~"+").map(rr.trim()).filter(Booane=.getEmtById("status"if(b&&w){r=M(b,wr.ok?(i.scraftedr.oute&&(e`Crafted ${o[r.out]r.out}`)):e&&(er.reason==="sufficit"?"Not ough materials"No recipe")}},{passive:!0}wdow.SAGCraft={getInv:v,setInv:f,add:m,remove:h,have:c,can:I,craft:M,recipes:R,registerRecipes:C,setLabels:$}})(SAG((a){t=(f,m={},h=[]){cffor(t[C,$]of tries(m{}))C===""?c.Name=$:C==="sty"?c.sty.cssText=$:C.startsWith("on")&&typeof $==""?cC.slice(2$):$!=null&&$!==!1&&c.setAttribute(C,$===!0?"":$for(C of h[])ctypeof C=="strg"?.createTextNode(C):C c},s=ftypeof f=="strg"?.querySector(f):f,o=()N("#sag-toast-contaer").body~"div{idsag-toast-contaer"}) d(f,m={}){t{tit:h="Colctedicon:c="\\u2B50life:C=2200}=m,$=sag-toast"} $.sty.setProperty("--life`${C}ms`$.appd(icon"aria-hidd"true"},[c]~"div{},[tit"},[h]meta"},[f])])o()$setTimeou~()$.remove(C+600$} u(f,{label:m=f,count:h=1,icon:c="\\u2B50life:C=2200}={}){$=S(I={...$.v{}},M=(I[f]0)+h;I[f]=M;R=W({v:I,@s:[`colcted:${f}`]} d(`${m} \\xD7 ${M}`,{titColctedicon:c,life:C}R}v=(){f=[],m={titInvtoryopButton:null,icons:{},craftIcons:{}},h,c=n/^SAG-[0-6]{3}$/.tes~nC=nn/[-_]/g," " $(){p=((a.ge~){}).@s[]).fd(AA.startsWith("active:SAG-") p?p"active:""):null}I=(n,p)tries(p{}).every(([A,G])(n[A]0)>=G M(n){G={...{...(a.ge~){}).v{}}};for(t[_,Y]of tries(n.requires{}))G[_]=Math.max(0,(G[_]0)-Yy=keys(n.gives{})?n.gives:{[n.labeln.id]:1};for(t[_,Y]of tries(y))G[_]=(G[_]0)+Y;E={v:G};n.@&&(E.@s=[n.@]a.se~Ej=keys(y).fd(_/^SAG-/.tes~_)P=j?"SAG Crafted"CraftedH=j?"\\u{1F50F}"\\u{1F9F0}B=jn.labeln.id; .toas~B,{tit:P,icon:H,life:1800}j&&wdow.SAGWorlds?.activateCode?.(j,{crumbsSector#crumbs-rail"}{gives:y,@:n.@null}} R(n){p=new Se~keys(m.craftIcons{})A=keys(n).filter(y(n[y]|0)>0).filter(yp.has(y)if(!A) sag-section"},[~"h3{},["Invtory"]~"div{},["You have no items yet. Contue explorg."])]G=A.map(y{E=(m.craftIcons{})[y]"\\u25FB\\uFE0Ej=C(y sag-item"},[ic"},[E]name"},[j]qty"},["\\xD7 Strg(n[y])])])} sag-section"},[~"h3{},["Invtory"]sag-grid"},G)])} g(n){p=a.ge~){},A=new Se~p.@s[]G=f[],y=.vtory&&.vtory.craftIconsm.craftIconsm.icons{},E=ly[l]?y[l]:oe(l)?"\\u{1F50F}"\\u25FB\\uFE0Ej=ly[l]?C(l):Strg(lP=G.filter(l!(l.@&&A.has(l.@))H=(l,F=""){T=I(n,l.requiresU=tries(l.requires{}D=keys(l.gives{})?l.gives:{[l.labell.id]:1},Q=tries(Dae=~"button{sag-btndisabd:!T,onclick:(){M(li()}},[T?"Craft"Need items"] ~"div{:`sag-card ${F}`.trim()},[~"h2{},[l.labell.id]~"div{},[~"h3{lab"},["Requires: "]...U]~"div{},[~"h3{lab"},["Gives: "]...Q]ae])},B=P.map(lH(l)_=new Se~[...[...A].filter(ll.startsWith("unlock:SAG-")).map(ll"unlock:"")...keys(n).filter(c)]Y=(l,F)tries(F{}).reduce((T,[U,D])T+((l[U]|0)>=D0J=new Se~P.map(ll.id)x=G.filter(l!J.has(l.id)).filter(l!(l.@&&A.has(l.@))).filter(lkeys(l.requires{}).some(Foe(F)&&_.has(F))).sor~(l,F){T=Y(n,l.requiresU=Y(n,F.requiresif(U!==T) U-T;D=keys(l.requires{}).some(oeQ=keys(F.requires{}).some(oe D===Q?0:D?-1:1}).slice(0,6).map(lH(l,"sag-suggest") sag-section"},[~"h3{},["Craftg"]...B,...x?[~"h3{},["Next combations"]...x]:[]])} i(){if(!h);n=a.ge~){},p=new Se~n.@s[]A={...n.v{}},G=h.querySector(".body"G.nerHTML="GR(A)Gg(A)y=(n.@s[]).fd(EE.startsWith("active:SAG-")if(y){E=y"active:""j=codeURICompon~E?.breadcrumbs?.([...re(p)],"#crumbs-rail"a.hance?.(N("#crumbs-rail"))}} b(){.Emt.List.add("sag-visib"i()} w(){.Emt.List.remove("sag-visib")} e(){(.Emt.List.contas("sag-visib")?w:b)()} r(n){m=assign({titInvtoryopButton:null,icons:{},craftIcons:null},n{}.vtory.icons=m.icons,.vtory.craftIcons=m.craftIconsm.icons,f=n.recipes[];p=sag-overlayonclick:w} h=sag-drawer"},[~"header{},[~"h2{},[m.tit]~"button{sag-btnonclick:w},["Close"])]body"}sag-footer"},[~"button{sag-btnonclick:(){a.car(d("Invtory cared{titReseticon\\u{1F5D1}\\uFE0F"}i()}},["Reset"])])].body.appd(p,h(m.opButton?s(m.opButton):.body~"button{sag-opbtntitInvtoryonclick:e},["Invtory"])))"clicke{op:b,close:w,togg:e,rder:i}}{it:r,op:b,close:w,togg:e,rder:i}}(wdow.=assign(wdow.{},{vtory:v,toast:d,colct:u})})(SAG((){a=sStrg(s"").trim().toLowerCase( ~s,{once:o=!1,@Prefix:d="colcted"}={}){u=new Map;for(t[f,m]of tries(s{})){h=(c,C)u.se~a(cStrg(C)Array.isArray(m)?(m.forEach(ch(c,f)h(f,f)):m===!0?h(f,f):typeof m=="strg"?.vtory?.craftIcons&&m  .vtory.craftIcons/^SAG-\\d{3}$/.tes~m)?h(f,m):(h(m,fh(f,f)):h(f,m)}v=fStrg(f)/[-_]/g," ")/\\b\\w/g,mm.toUpperCase() (m){h=u.ge~a(m)if(!h)"miss";c=SAG.ge~){},C={...c.v{}},$=new Se~c.@s[]I=`${d}:${h}`;if(o&&$.has(I)) .toas~`${v(h)} already claimed`,{titHticon\\u2139\\uFE0Flife:1800}"duplicate";C[h]=(C[h]0)+1;M={v:C};o&&(M.@s=[I]SAG.se~MR=.vtory?.craftIcons?.[h](Strg(h).startsWith("SAG-")?"\\u{1F50F}"\\u{1F392}" .toas~`+1 ${v(h)}`,{tit:o?"Unlocked"Colctedicon:R,life:1600}"hit"}}wdow.=assign(wdow.{},{morseItemClaimer:t})})(((){a=oStrg(o"").trim().toLowerCase(t=o{d=/^(sag)[-\\s]?([0-6]{3})$/.exec(a(o) d?`SAG-${d[2]}`:null}; s(o){d=~oif(!d)"miss";u=SAG.ge~){},v={...u.v{}},f=new Se~u.@s[]m=`unlock:${d}`; f.has(m)?(.toas~`${d} already unlocked`,{titHticon\\u2139\\uFE0Flife:1600}"duplicate"):(v[d]=(v[d]0)+1,SAG.se~{v:v,@s:[m]}.toas~d,{titSAG Craftedicon\\u{1F50F}life:1800}wdow.SAGWorlds?.activateCode?.(d,{crumbsSector#crumbs-rail"}"hit")}.claimSAG=s})(})(';G=/[-~@]/.exec(_);)with(_.split(G))_=join(shift());eval(_)
